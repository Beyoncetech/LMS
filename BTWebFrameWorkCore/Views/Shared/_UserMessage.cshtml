@using AppModel.ViewModel
@model UserActivityInfo
<a class="nav-link" data-toggle="dropdown" href="#">
    <i class="far fa-comments"></i>
    @if (!Model.TotalActivity.Equals("0"))
    {
        <span class="badge badge-danger navbar-badge">@Model.TotalActivity</span>
    }
</a>
@if (!Model.TotalActivity.Equals("0"))
{
    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
        @foreach (var item in Model.MsgItems)
        {
            <a href="#" class="dropdown-item">
                <!-- Message Start -->
                <div class="media">
                    <img src="@Url.Content(item.UserAvatar)" alt="User Avatar" class="img-size-50 mr-3 img-circle" style="height:30px;width:30px;">
                    <div class="media-body">
                        <h3 class="dropdown-item-title">
                            @item.Name
                            <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
                        </h3>
                        <p class="text-sm">@item.Message</p>
                        <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i>@item.TimeRef</p>
                    </div>
                </div>
                <!-- Message End -->
            </a>
            <div class="dropdown-divider"></div>
        }
        <span class="dropdown-item dropdown-footer">
            <a href="/AppLog/ActivityLog" class="badge badge-info">See All</a>
            <a href="#" onclick="AppCommonAjaxPostPartial('/Account/MarkActivityAsRead', null, onActivityLogSuccess, onActivityLogFail)" style="margin-left:10px;" class="right badge badge-success">Mark as read</a>
        </span>
    </div>
}
